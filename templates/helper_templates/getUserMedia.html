<div>
    <audio controls  class="audioStream">
        <source src="" type="audio/mpeg">
    </audio>
    <button id="but">Give permission</button>
</div>



<script>
    document.addEventListener('DOMContentLoaded', () => {
  var  constraints = {audio:true}
  async function getMedia(constraints){
      let stream =null;

      try{
          stream = await navigator.mediaDevices.getUserMedia(constraints);
            console.log(stream)
            a=document.querySelector('.audioStream')
            a.srcObject=stream;
            a.onloadedmetadata = (e)=>{
                a.play();   
            }
      } catch(err) {
        //   Do something
        console.log(err)
      }
    }
    but = document.querySelector('#but')
      but.addEventListener('click', () =>{
          getMedia(constraints)

      })
    }); 
</script>
